define(["core/ajax","core/notification","core/str"],function(a,b,c){var d=function(d,e,f){var g=document.getElementById("mod_visio_receiver"),h=document.createElement("button");h.classList="btn btn-primary",f?""!=e?c.get_string("broadcastview","visio").done(function(a){h.innerHTML=a}):(h=document.createElement("span"),h.classList="alert alert-info",c.get_string("broadcastsoon","visio").done(function(a){h.innerHTML=a})):c.get_string("access","visio").done(function(a){h.innerHTML=a}),a.call([{methodname:"mod_visio_host_launch_visio",args:{url:d},done:function(a){""!=e&&(f?h.addEventListener("click",function(){window.open(e)}):h.addEventListener("click",function(){window.open(e+"/?session="+a)})),g.appendChild(h)},fail:function(a){b.exception(a)}}],!0)};return{init:function(a,b,c){return new d(a,b,c)}}});